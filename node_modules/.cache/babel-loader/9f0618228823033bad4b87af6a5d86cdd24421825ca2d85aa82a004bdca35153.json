{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lozan\\\\Desktop\\\\Git\\\\dca-spotfire\\\\frontend\\\\src\\\\InteractiveDCAChart.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useMemo } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst calculateRate = (Qi, b, D, t) => {\n  if (b === 0) {\n    return Qi * Math.exp(-D * t);\n  }\n  return Qi / Math.pow(1 + b * D * t, 1 / b);\n};\nfunction detectDateColumn(columns) {\n  const candidates = columns.filter(h => {\n    const lower = h.toLowerCase();\n    return lower.includes(\"prod\") && lower.includes(\"date\") || lower.includes(\"proddt\") || lower.includes(\"proddttm\") || lower === \"date\" || lower === \"datetime\";\n  });\n  return candidates.length > 0 ? candidates[0] : \"Production_Date\";\n}\nfunction detectColumns(columns) {\n  let phases = {};\n  columns.forEach(header => {\n    const lower = header.toLowerCase();\n    if (lower.includes(\"bopd\") || lower.includes(\"oil\") && !phases.oil) {\n      phases.oil = header;\n    }\n    if (lower.includes(\"bwpd\") || lower.includes(\"water\") && !phases.water) {\n      phases.water = header;\n    }\n    if (lower.includes(\"mcfd\") || lower.includes(\"gas\") && !phases.gas) {\n      phases.gas = header;\n    }\n    if ((lower.includes(\"pip\") || lower.includes(\"pressure\") || lower.includes(\"psi\")) && !phases.pressure) {\n      phases.pressure = header;\n    }\n  });\n  return phases;\n}\nexport default function InteractiveDCAChart({\n  dataString,\n  startDate,\n  endDate,\n  colors,\n  yScaleType,\n  yMultiplier,\n  forecastDays,\n  autoForecast = true,\n  onParametersCalculated\n}) {\n  _s();\n  const svgRef = useRef(null);\n  const xScaleRef = useRef(null);\n  const yScaleRef = useRef(null);\n  const dragInProgressRef = useRef(false);\n  const dragStartPointRef = useRef(null);\n\n  // For tooltip\n  const [hoverInfo, setHoverInfo] = useState(null);\n\n  // Parameters\n  const [phaseParams, setPhaseParams] = useState({});\n  const [autoFitEnabled, setAutoFitEnabled] = useState(true);\n  const [activeKey, setActiveKey] = useState(null);\n  const [activePhase, setActivePhase] = useState(null);\n\n  // Prevent infinite loops\n  const prevParamsRef = useRef({});\n  const lastOnParamsCallRef = useRef(null);\n\n  // Parse CSV data\n  const parsedData = useMemo(() => {\n    try {\n      return d3.csvParse(dataString);\n    } catch (err) {\n      console.error(\"Error parsing CSV:\", err);\n      return [];\n    }\n  }, [dataString]);\n\n  // Basic data processing\n  const hasData = parsedData.length > 0;\n  const prodDateCol = useMemo(() => hasData ? detectDateColumn(parsedData.columns) : \"Production_Date\", [hasData, parsedData]);\n  const phasesDetected = useMemo(() => hasData ? detectColumns(parsedData.columns) : {}, [hasData, parsedData]);\n\n  // Filter data based on date range\n  const filteredData = useMemo(() => {\n    if (!hasData) return [];\n\n    // Parse dates and filter invalid\n    let arr = parsedData.map(row => ({\n      ...row,\n      [prodDateCol]: new Date(row[prodDateCol])\n    })).filter(row => !isNaN(row[prodDateCol].getTime()));\n\n    // Sort by date\n    arr.sort((a, b) => a[prodDateCol] - b[prodDateCol]);\n\n    // Apply date filters if provided\n    if (startDate) {\n      const sd = new Date(startDate);\n      arr = arr.filter(row => row[prodDateCol] >= sd);\n    }\n    if (endDate) {\n      const ed = new Date(endDate);\n      arr = arr.filter(row => row[prodDateCol] <= ed);\n    }\n    return arr;\n  }, [parsedData, prodDateCol, startDate, endDate, hasData]);\n  const localHasData = filteredData.length > 0;\n\n  // Get first date and calculate relative times\n  const firstDate = useMemo(() => localHasData ? filteredData[0][prodDateCol] : new Date(), [localHasData, filteredData, prodDateCol]);\n  const data = useMemo(() => {\n    if (!localHasData) return [];\n    return filteredData.map(row => {\n      const date = row[prodDateCol];\n      return {\n        ...row,\n        t: (date - firstDate) / (1000 * 60 * 60 * 24)\n      };\n    });\n  }, [filteredData, localHasData, firstDate, prodDateCol]);\n\n  // Extract phase data\n  const phaseData = useMemo(() => {\n    let result = {};\n    Object.keys(phasesDetected).forEach(phase => {\n      result[phase] = data.map(d => ({\n        t: d.t,\n        value: +d[phasesDetected[phase]]\n      })).filter(d => !isNaN(d.value));\n    });\n    return result;\n  }, [data, phasesDetected]);\n\n  // Get max time and last production date\n  const tMax = useMemo(() => localHasData ? d3.max(data, d => d.t) : 0, [data, localHasData]);\n  const lastProdDate = useMemo(() => localHasData ? d3.max(data, d => d[prodDateCol]) : new Date(), [data, localHasData, prodDateCol]);\n\n  // Auto-fit parameters (simplified)\n  useEffect(() => {\n    if (!localHasData || !autoFitEnabled) return;\n    let newParams = {};\n    Object.keys(phaseData).forEach(phase => {\n      const points = phaseData[phase];\n      if (points.length < 3) {\n        var _points$;\n        newParams[phase] = {\n          Qi: (points === null || points === void 0 ? void 0 : (_points$ = points[0]) === null || _points$ === void 0 ? void 0 : _points$.value) || 100,\n          b: 0.5,\n          D: 0.05\n        };\n      } else {\n        // Simple fit - find the first and last points\n        const first = points[0];\n        const last = points[points.length - 1];\n\n        // Default values\n        const Qi = first.value;\n        const b = 0.5; // Reasonable default\n\n        // Calculate D based on decline between first and last points\n        const ratio = last.value / first.value;\n        const t = last.t - first.t;\n        let D;\n        if (b === 0) {\n          // Exponential\n          D = -Math.log(ratio) / t;\n        } else {\n          // Hyperbolic\n          D = ((1 / ratio) ** b - 1) / (b * t);\n        }\n\n        // Ensure D is reasonable\n        D = Math.max(0.001, Math.min(0.5, D));\n        newParams[phase] = {\n          Qi,\n          b,\n          D\n        };\n      }\n    });\n\n    // Only update if parameters changed\n    if (JSON.stringify(newParams) !== JSON.stringify(prevParamsRef.current)) {\n      prevParamsRef.current = newParams;\n      setPhaseParams(newParams);\n    }\n  }, [phaseData, localHasData, autoFitEnabled]);\n\n  // Convert phase data to points for plotting\n  const allHistoricalPoints = useMemo(() => {\n    let out = [];\n    Object.keys(phaseData).forEach(phase => {\n      phaseData[phase].forEach(d => {\n        out.push({\n          date: new Date(firstDate.getTime() + d.t * 86400000),\n          Q: d.value,\n          phase\n        });\n      });\n    });\n    return out;\n  }, [phaseData, firstDate]);\n\n  // Simple forecast calculation\n  const allForecastPoints = useMemo(() => {\n    if (!localHasData) return {};\n    let out = {};\n    Object.keys(phaseParams).forEach(phase => {\n      const {\n        Qi,\n        b,\n        D\n      } = phaseParams[phase] || {};\n      if (!Qi || D <= 0) {\n        out[phase] = [];\n        return;\n      }\n\n      // Calculate last rate at tMax\n      const lastRate = calculateRate(Qi, b, D, tMax);\n\n      // Create forecast points\n      const points = [];\n      const steps = 50;\n\n      // Add the start point (last production date)\n      points.push({\n        date: lastProdDate,\n        Q: lastRate,\n        phase\n      });\n\n      // Add forecast points\n      for (let i = 1; i <= steps; i++) {\n        const days = i / steps * forecastDays;\n        const t = tMax + days;\n        const Q = calculateRate(Qi, b, D, t);\n        const date = new Date(lastProdDate.getTime() + days * 86400000);\n        points.push({\n          date,\n          Q,\n          phase\n        });\n      }\n      out[phase] = points;\n    });\n    return out;\n  }, [phaseParams, tMax, lastProdDate, forecastDays, localHasData]);\n\n  // Calculate EUR and forecast average\n  const calculatedEUR = useMemo(() => {\n    let results = {};\n    Object.keys(phaseParams).forEach(phase => {\n      const {\n        Qi,\n        b,\n        D\n      } = phaseParams[phase] || {};\n      if (!Qi || D <= 0) {\n        results[phase] = \"N/A\";\n        return;\n      }\n      if (b === 0) results[phase] = Qi / D;else if (b > 0 && b < 1) results[phase] = Qi / (D * (1 - b));else if (b === 1) results[phase] = Qi * 10000;else results[phase] = \"N/A\";\n    });\n    return results;\n  }, [phaseParams]);\n  const forecastAverage = useMemo(() => {\n    let fa = {};\n    Object.keys(phaseParams).forEach(phase => {\n      const {\n        Qi,\n        b,\n        D\n      } = phaseParams[phase] || {};\n      if (!Qi || D <= 0) {\n        fa[phase] = 0;\n        return;\n      }\n      const Q_start = calculateRate(Qi, b, D, tMax);\n      const steps = 60;\n      let sum = 0;\n      for (let i = 0; i <= steps; i++) {\n        const t = tMax + i / steps * 60;\n        const Q = calculateRate(Qi, b, D, t);\n        sum += Q;\n      }\n      fa[phase] = sum / (steps + 1);\n    });\n    return fa;\n  }, [phaseParams, tMax]);\n\n  // Call onParametersCalculated when params change\n  useEffect(() => {\n    if (!onParametersCalculated) return;\n    const newParams = {\n      phaseParams,\n      calculatedEUR,\n      forecastAverage\n    };\n    const stringifiedNew = JSON.stringify(newParams);\n    const stringifiedPrev = JSON.stringify(lastOnParamsCallRef.current);\n    if (stringifiedNew !== stringifiedPrev) {\n      lastOnParamsCallRef.current = newParams;\n      onParametersCalculated(newParams);\n    }\n  }, [phaseParams, calculatedEUR, forecastAverage, onParametersCalculated]);\n\n  // Improved key event handlers\n  useEffect(() => {\n    const handleKeyDown = e => {\n      const key = e.key.toLowerCase();\n      if ([\"d\", \"q\", \"b\"].includes(key)) {\n        // Only set the active key if not already in a drag operation\n        if (!dragInProgressRef.current) {\n          setActiveKey(key);\n        }\n      }\n    };\n    const handleKeyUp = e => {\n      const key = e.key.toLowerCase();\n      if (key === activeKey) {\n        setActiveKey(null);\n        dragInProgressRef.current = false;\n        dragStartPointRef.current = null;\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [activeKey]);\n\n  // Helper function to get appropriate sensitivity for each parameter\n  const getSensitivity = key => {\n    switch (key) {\n      case \"d\":\n        return 0.0002;\n      // Much lower sensitivity for D\n      case \"q\":\n        return 0.5;\n      // Moderate sensitivity for Qi\n      case \"b\":\n        return 0.002;\n      // Low sensitivity for b\n      default:\n        return 1;\n    }\n  };\n\n  // Update all chart elements when parameters change\n  const updateChartElements = () => {\n    if (!svgRef.current) return;\n    const svg = d3.select(svgRef.current);\n    const xScale = xScaleRef.current;\n    const yScale = yScaleRef.current;\n    if (!xScale || !yScale) return;\n\n    // Update all data paths\n    Object.keys(phaseParams).forEach(phase => {\n      // Generate historical line data\n      const {\n        Qi,\n        b,\n        D\n      } = phaseParams[phase];\n      const historicalLineData = [];\n      const steps = 100;\n      for (let i = 0; i <= steps; i++) {\n        const frac = i / steps;\n        const t = tMax * frac;\n        const Q = calculateRate(Qi, b, D, t);\n        const date = new Date(firstDate.getTime() + t * 86400000);\n        historicalLineData.push({\n          date,\n          Q\n        });\n      }\n\n      // Update the historical line path\n      const lineGen = d3.line().x(d => xScale(d.date)).y(d => yScale(d.Q)).curve(d3.curveMonotoneX);\n      svg.select(`.decline-line-${phase}`).datum(historicalLineData).attr(\"d\", lineGen);\n\n      // Generate and update forecast data\n      const forecastData = allForecastPoints[phase] || [];\n      svg.select(`.forecast-line-${phase}`).datum(forecastData).attr(\"d\", lineGen);\n    });\n  };\n\n  // D3 rendering\n  useEffect(() => {\n    if (!localHasData || !svgRef.current) {\n      console.log('No data or SVG ref to render');\n      return;\n    }\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 40,\n      left: 60\n    };\n    const width = 800;\n    const height = 400;\n    const svg = d3.select(svgRef.current);\n\n    // Clear previous content\n    svg.selectAll(\"*\").remove();\n\n    // Create background for plot area\n    svg.append(\"rect\").attr(\"x\", margin.left).attr(\"y\", margin.top).attr(\"width\", width - margin.left - margin.right).attr(\"height\", height - margin.top - margin.bottom).attr(\"fill\", \"#f8f8f8\").attr(\"stroke\", \"#ccc\");\n\n    // Create chart area group\n    const chartArea = svg.append(\"g\").attr(\"class\", \"chart-area\");\n\n    // Set up scales\n    const dateExtent = d3.extent([...allHistoricalPoints.map(d => d.date), ...Object.values(allForecastPoints).flat().map(d => d.date)]);\n    const minDate = dateExtent[0] || new Date();\n    const maxDate = dateExtent[1] || new Date();\n    const qValues = [...allHistoricalPoints.map(d => d.Q), ...Object.values(allForecastPoints).flat().map(d => d.Q)];\n    const qExtent = d3.extent(qValues);\n    let minQ = qExtent[0] || 0;\n    let maxQ = qExtent[1] || 100;\n\n    // Add padding for Y axis\n    if (yScaleType !== \"log\") {\n      const qRange = maxQ - minQ;\n      maxQ = maxQ + qRange * 0.1;\n      minQ = Math.max(0, minQ - qRange * 0.05);\n    } else if (minQ <= 0) {\n      minQ = 0.01;\n    }\n\n    // Create scales\n    const xScale = d3.scaleTime().domain([minDate, maxDate]).range([margin.left, width - margin.right]);\n    xScaleRef.current = xScale;\n    const yScale = yScaleType === \"log\" ? d3.scaleLog().domain([Math.max(0.01, minQ), maxQ]).range([height - margin.bottom, margin.top]) : d3.scaleLinear().domain([minQ, maxQ]).range([height - margin.bottom, margin.top]);\n    yScaleRef.current = yScale;\n\n    // Draw historical data points\n    Object.keys(phasesDetected).forEach(phase => {\n      const points = allHistoricalPoints.filter(p => p.phase === phase);\n      chartArea.selectAll(`circle.${phase}`).data(points).enter().append(\"circle\").attr(\"class\", phase).attr(\"cx\", d => xScale(d.date)).attr(\"cy\", d => yScale(d.Q)).attr(\"r\", 3).attr(\"fill\", colors[phase] || \"#888\");\n    });\n\n    // Draw historical trend lines\n    Object.keys(phaseParams).forEach(phase => {\n      var _phaseData$phase;\n      // Only draw if we have parameters and data\n      if (!phaseParams[phase] || !((_phaseData$phase = phaseData[phase]) !== null && _phaseData$phase !== void 0 && _phaseData$phase.length)) return;\n      const {\n        Qi,\n        b,\n        D\n      } = phaseParams[phase];\n\n      // Create line data\n      const lineData = [];\n      const steps = 100;\n      for (let i = 0; i <= steps; i++) {\n        const frac = i / steps;\n        const t = tMax * frac;\n        const Q = calculateRate(Qi, b, D, t);\n        const date = new Date(firstDate.getTime() + t * 86400000);\n        lineData.push({\n          date,\n          Q\n        });\n      }\n\n      // Create line generator\n      const lineGen = d3.line().x(d => xScale(d.date)).y(d => yScale(d.Q)).curve(d3.curveMonotoneX);\n\n      // Draw line\n      chartArea.append(\"path\").datum(lineData).attr(\"class\", `decline-line-${phase}`).attr(\"fill\", \"none\").attr(\"stroke\", colors[phase] || \"#888\").attr(\"stroke-width\", 2).attr(\"d\", lineGen).style(\"cursor\", \"pointer\").on(\"mouseover\", function () {\n        // Highlight on hover\n        d3.select(this).attr(\"stroke-width\", 4);\n      }).on(\"mouseout\", function () {\n        // Unhighlight if not the active phase\n        if (phase !== activePhase) {\n          d3.select(this).attr(\"stroke-width\", 2);\n        }\n      }).on(\"mousedown\", function (event) {\n        // Set this as the active phase when clicked\n        setActivePhase(phase);\n\n        // Only initiate drag if a key is pressed\n        if (activeKey) {\n          if (autoFitEnabled) setAutoFitEnabled(false);\n\n          // Mark drag as started and store the starting point\n          dragInProgressRef.current = true;\n          dragStartPointRef.current = {\n            y: event.y,\n            params: {\n              ...phaseParams[phase]\n            }\n          };\n\n          // Highlight the active line\n          d3.select(this).attr(\"stroke-width\", 4);\n        }\n      }).on(\"mouseup\", function () {\n        // End the drag operation\n        dragInProgressRef.current = false;\n        dragStartPointRef.current = null;\n      }).call(d3.drag().on(\"drag\", event => {\n        if (!activeKey || !dragInProgressRef.current) return;\n\n        // Only proceed if we have a starting point\n        if (!dragStartPointRef.current) {\n          dragStartPointRef.current = {\n            y: event.y,\n            params: {\n              ...phaseParams[phase]\n            }\n          };\n          return;\n        }\n        const startParams = dragStartPointRef.current.params;\n        const totalDy = event.y - dragStartPointRef.current.y;\n        const sensitivity = getSensitivity(activeKey);\n        setPhaseParams(prev => {\n          const copy = {\n            ...prev\n          };\n          const curr = {\n            ...copy[phase]\n          };\n          if (activeKey === \"d\") {\n            // For D, we use the start value and apply a percentage change\n            const factor = 1 - totalDy * sensitivity;\n            curr.D = Math.max(0.0001, startParams.D * factor);\n          } else if (activeKey === \"q\") {\n            // For Qi, we subtract directly from the start value\n            curr.Qi = Math.max(1, startParams.Qi - totalDy * sensitivity);\n          } else if (activeKey === \"b\") {\n            // For b, we add/subtract from the start value but clamp\n            curr.b = Math.max(0, Math.min(1, startParams.b + totalDy * sensitivity));\n          }\n          copy[phase] = curr;\n          return copy;\n        });\n\n        // Update the chart in real-time\n        updateChartElements();\n      }));\n    });\n\n    // Draw forecast lines\n    Object.keys(allForecastPoints).forEach(phase => {\n      const forecastPoints = allForecastPoints[phase];\n      if (forecastPoints.length > 1) {\n        const lineGen = d3.line().x(d => xScale(d.date)).y(d => yScale(d.Q)).curve(d3.curveMonotoneX);\n        chartArea.append(\"path\").datum(forecastPoints).attr(\"class\", `forecast-line-${phase}`).attr(\"fill\", \"none\").attr(\"stroke\", d3.color(colors[phase] || \"#888\").brighter(1.2)).attr(\"stroke-width\", 3).attr(\"stroke-dasharray\", \"5,3\").attr(\"d\", lineGen).on(\"mouseover\", function () {\n          d3.select(this).attr(\"stroke-width\", 5);\n        }).on(\"mouseout\", function () {\n          if (phase !== activePhase) {\n            d3.select(this).attr(\"stroke-width\", 3);\n          }\n        });\n      }\n    });\n\n    // Add vertical line at last production date\n    chartArea.append(\"line\").attr(\"x1\", xScale(lastProdDate)).attr(\"y1\", margin.top).attr(\"x2\", xScale(lastProdDate)).attr(\"y2\", height - margin.bottom).attr(\"stroke\", \"#666\").attr(\"stroke-width\", 1).attr(\"stroke-dasharray\", \"5,5\");\n\n    // Add forecast label\n    chartArea.append(\"text\").attr(\"x\", xScale(lastProdDate) + 5).attr(\"y\", margin.top + 15).attr(\"fill\", \"#666\").text(\"Forecast →\");\n\n    // Add axes\n    const xAxis = d3.axisBottom(xScale).tickFormat(d3.timeFormat(\"%Y-%m-%d\"));\n    svg.append(\"g\").attr(\"transform\", `translate(0,${height - margin.bottom})`).call(xAxis).selectAll(\"text\").attr(\"transform\", \"rotate(-45)\").style(\"text-anchor\", \"end\");\n    const yAxis = yScaleType === \"log\" ? d3.axisLeft(yScale).ticks(6, \"~s\") : d3.axisLeft(yScale);\n    svg.append(\"g\").attr(\"transform\", `translate(${margin.left},0)`).call(yAxis);\n\n    // Add axis labels\n    svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", height - 5).style(\"text-anchor\", \"middle\").text(\"Date\");\n    svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"x\", -height / 2).attr(\"y\", 15).style(\"text-anchor\", \"middle\").text(\"Production Rate\");\n\n    // Add zoom behavior\n    const zoom = d3.zoom().scaleExtent([0.5, 10]).on(\"zoom\", event => {\n      const newYScale = event.transform.rescaleY(yScale);\n      yScaleRef.current = newYScale;\n\n      // Update circles\n      chartArea.selectAll(\"circle\").attr(\"cy\", d => newYScale(d.Q));\n\n      // Update paths\n      chartArea.selectAll(\"path\").attr(\"d\", function (d) {\n        if (!Array.isArray(d)) return;\n        const lineGen = d3.line().x(d => xScale(d.date)).y(d => newYScale(d.Q)).curve(d3.curveMonotoneX);\n        return lineGen(d);\n      });\n\n      // Update y-axis\n      svg.select(\"g:has(.tick)\").call(yAxis.scale(newYScale));\n    });\n    svg.call(zoom);\n  }, [localHasData, allHistoricalPoints, allForecastPoints, phasesDetected, phaseParams, phaseData, firstDate, tMax, lastProdDate, yScaleType, colors, forecastDays]);\n\n  // Render component\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 20,\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Active Key:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 13\n          }, this), \" \", activeKey ? activeKey.toUpperCase() : \"None\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Selected Phase:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 13\n          }, this), \" \", activePhase ? activePhase.toUpperCase() : \"None\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Drag Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 13\n          }, this), \" \", dragInProgressRef.current ? \"In Progress\" : \"None\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Instructions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 753,\n          columnNumber: 11\n        }, this), \" Hold D, Q, or B key and drag a line to adjust parameters\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 740,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: 800,\n      height: 400,\n      onMouseMove: event => {\n        if (!localHasData || !xScaleRef.current) return;\n        const [mouseX] = d3.pointer(event, svgRef.current);\n        const date = xScaleRef.current.invert(mouseX);\n        const t = (date - firstDate) / 86400000;\n        let vals = {};\n        Object.keys(phaseParams).forEach(phase => {\n          const {\n            Qi,\n            b,\n            D\n          } = phaseParams[phase] || {};\n          if (Qi && b !== undefined && D) {\n            vals[phase] = calculateRate(Qi, b, D, t);\n          }\n        });\n        setHoverInfo({\n          x: mouseX,\n          date,\n          values: vals\n        });\n      },\n      onMouseOut: () => setHoverInfo(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 7\n    }, this), hoverInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        left: hoverInfo.x + 5,\n        top: 40,\n        pointerEvents: 'none',\n        background: 'rgba(255,255,255,0.9)',\n        border: '1px solid #ccc',\n        padding: 5,\n        fontSize: 12,\n        borderRadius: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: hoverInfo.date.toDateString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 795,\n        columnNumber: 11\n      }, this), Object.keys(hoverInfo.values).map(ph => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [ph.toUpperCase(), \": \", hoverInfo.values[ph].toFixed(2)]\n      }, ph, true, {\n        fileName: _jsxFileName,\n        lineNumber: 797,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 782,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 739,\n    columnNumber: 5\n  }, this);\n}\n_s(InteractiveDCAChart, \"UZktKjhxC0ZstxjYF75k6zcZMRY=\");\n_c = InteractiveDCAChart;\nvar _c;\n$RefreshReg$(_c, \"InteractiveDCAChart\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useMemo","d3","jsxDEV","_jsxDEV","calculateRate","Qi","b","D","t","Math","exp","pow","detectDateColumn","columns","candidates","filter","h","lower","toLowerCase","includes","length","detectColumns","phases","forEach","header","oil","water","gas","pressure","InteractiveDCAChart","dataString","startDate","endDate","colors","yScaleType","yMultiplier","forecastDays","autoForecast","onParametersCalculated","_s","svgRef","xScaleRef","yScaleRef","dragInProgressRef","dragStartPointRef","hoverInfo","setHoverInfo","phaseParams","setPhaseParams","autoFitEnabled","setAutoFitEnabled","activeKey","setActiveKey","activePhase","setActivePhase","prevParamsRef","lastOnParamsCallRef","parsedData","csvParse","err","console","error","hasData","prodDateCol","phasesDetected","filteredData","arr","map","row","Date","isNaN","getTime","sort","a","sd","ed","localHasData","firstDate","data","date","phaseData","result","Object","keys","phase","d","value","tMax","max","lastProdDate","newParams","points","_points$","first","last","ratio","log","min","JSON","stringify","current","allHistoricalPoints","out","push","Q","allForecastPoints","lastRate","steps","i","days","calculatedEUR","results","forecastAverage","fa","Q_start","sum","stringifiedNew","stringifiedPrev","handleKeyDown","e","key","handleKeyUp","window","addEventListener","removeEventListener","getSensitivity","updateChartElements","svg","select","xScale","yScale","historicalLineData","frac","lineGen","line","x","y","curve","curveMonotoneX","datum","attr","forecastData","margin","top","right","bottom","left","width","height","selectAll","remove","append","chartArea","dateExtent","extent","values","flat","minDate","maxDate","qValues","qExtent","minQ","maxQ","qRange","scaleTime","domain","range","scaleLog","scaleLinear","p","enter","_phaseData$phase","lineData","style","on","event","params","call","drag","startParams","totalDy","sensitivity","prev","copy","curr","factor","forecastPoints","color","brighter","text","xAxis","axisBottom","tickFormat","timeFormat","yAxis","axisLeft","ticks","zoom","scaleExtent","newYScale","transform","rescaleY","Array","isArray","scale","position","children","marginBottom","display","gap","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","toUpperCase","marginTop","ref","onMouseMove","mouseX","pointer","invert","vals","undefined","onMouseOut","pointerEvents","background","border","padding","fontSize","borderRadius","toDateString","ph","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/lozan/Desktop/Git/dca-spotfire/frontend/src/InteractiveDCAChart.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useMemo } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nconst calculateRate = (Qi, b, D, t) => {\r\n  if (b === 0) {\r\n    return Qi * Math.exp(-D * t);\r\n  }\r\n  return Qi / Math.pow(1 + b * D * t, 1 / b);\r\n};\r\n\r\nfunction detectDateColumn(columns) {\r\n  const candidates = columns.filter(h => {\r\n    const lower = h.toLowerCase();\r\n    return (\r\n      (lower.includes(\"prod\") && lower.includes(\"date\")) ||\r\n      lower.includes(\"proddt\") ||\r\n      lower.includes(\"proddttm\") ||\r\n      lower === \"date\" ||\r\n      lower === \"datetime\"\r\n    );\r\n  });\r\n  return candidates.length > 0 ? candidates[0] : \"Production_Date\";\r\n}\r\n\r\nfunction detectColumns(columns) {\r\n  let phases = {};\r\n  columns.forEach(header => {\r\n    const lower = header.toLowerCase();\r\n    if (lower.includes(\"bopd\") || (lower.includes(\"oil\") && !phases.oil)) {\r\n      phases.oil = header;\r\n    }\r\n    if (lower.includes(\"bwpd\") || (lower.includes(\"water\") && !phases.water)) {\r\n      phases.water = header;\r\n    }\r\n    if (lower.includes(\"mcfd\") || (lower.includes(\"gas\") && !phases.gas)) {\r\n      phases.gas = header;\r\n    }\r\n    if ((lower.includes(\"pip\") || lower.includes(\"pressure\") || lower.includes(\"psi\")) && !phases.pressure) {\r\n      phases.pressure = header;\r\n    }\r\n  });\r\n  return phases;\r\n}\r\n\r\nexport default function InteractiveDCAChart({\r\n  dataString,\r\n  startDate,\r\n  endDate,\r\n  colors,\r\n  yScaleType,\r\n  yMultiplier,\r\n  forecastDays,\r\n  autoForecast = true,\r\n  onParametersCalculated\r\n}) {\r\n  const svgRef = useRef(null);\r\n  const xScaleRef = useRef(null);\r\n  const yScaleRef = useRef(null);\r\n  const dragInProgressRef = useRef(false);\r\n  const dragStartPointRef = useRef(null);\r\n  \r\n  // For tooltip\r\n  const [hoverInfo, setHoverInfo] = useState(null);\r\n  \r\n  // Parameters\r\n  const [phaseParams, setPhaseParams] = useState({});\r\n  const [autoFitEnabled, setAutoFitEnabled] = useState(true);\r\n  const [activeKey, setActiveKey] = useState(null);\r\n  const [activePhase, setActivePhase] = useState(null);\r\n  \r\n  // Prevent infinite loops\r\n  const prevParamsRef = useRef({});\r\n  const lastOnParamsCallRef = useRef(null);\r\n  \r\n  // Parse CSV data\r\n  const parsedData = useMemo(() => {\r\n    try {\r\n      return d3.csvParse(dataString);\r\n    } catch (err) {\r\n      console.error(\"Error parsing CSV:\", err);\r\n      return [];\r\n    }\r\n  }, [dataString]);\r\n  \r\n  // Basic data processing\r\n  const hasData = parsedData.length > 0;\r\n  const prodDateCol = useMemo(() => \r\n    hasData ? detectDateColumn(parsedData.columns) : \"Production_Date\", \r\n  [hasData, parsedData]);\r\n  \r\n  const phasesDetected = useMemo(() => \r\n    hasData ? detectColumns(parsedData.columns) : {}, \r\n  [hasData, parsedData]);\r\n  \r\n  // Filter data based on date range\r\n  const filteredData = useMemo(() => {\r\n    if (!hasData) return [];\r\n    \r\n    // Parse dates and filter invalid\r\n    let arr = parsedData.map(row => ({\r\n      ...row,\r\n      [prodDateCol]: new Date(row[prodDateCol])\r\n    })).filter(row => !isNaN(row[prodDateCol].getTime()));\r\n    \r\n    // Sort by date\r\n    arr.sort((a, b) => a[prodDateCol] - b[prodDateCol]);\r\n    \r\n    // Apply date filters if provided\r\n    if (startDate) {\r\n      const sd = new Date(startDate);\r\n      arr = arr.filter(row => row[prodDateCol] >= sd);\r\n    }\r\n    if (endDate) {\r\n      const ed = new Date(endDate);\r\n      arr = arr.filter(row => row[prodDateCol] <= ed);\r\n    }\r\n    \r\n    return arr;\r\n  }, [parsedData, prodDateCol, startDate, endDate, hasData]);\r\n  \r\n  const localHasData = filteredData.length > 0;\r\n  \r\n  // Get first date and calculate relative times\r\n  const firstDate = useMemo(() => \r\n    localHasData ? filteredData[0][prodDateCol] : new Date(),\r\n  [localHasData, filteredData, prodDateCol]);\r\n  \r\n  const data = useMemo(() => {\r\n    if (!localHasData) return [];\r\n    return filteredData.map(row => {\r\n      const date = row[prodDateCol];\r\n      return { \r\n        ...row, \r\n        t: (date - firstDate) / (1000 * 60 * 60 * 24) \r\n      };\r\n    });\r\n  }, [filteredData, localHasData, firstDate, prodDateCol]);\r\n  \r\n  // Extract phase data\r\n  const phaseData = useMemo(() => {\r\n    let result = {};\r\n    Object.keys(phasesDetected).forEach(phase => {\r\n      result[phase] = data.map(d => ({\r\n        t: d.t,\r\n        value: +d[phasesDetected[phase]]\r\n      })).filter(d => !isNaN(d.value));\r\n    });\r\n    return result;\r\n  }, [data, phasesDetected]);\r\n  \r\n  // Get max time and last production date\r\n  const tMax = useMemo(() => \r\n    localHasData ? d3.max(data, d => d.t) : 0,\r\n  [data, localHasData]);\r\n  \r\n  const lastProdDate = useMemo(() => \r\n    localHasData ? d3.max(data, d => d[prodDateCol]) : new Date(),\r\n  [data, localHasData, prodDateCol]);\r\n  \r\n  // Auto-fit parameters (simplified)\r\n  useEffect(() => {\r\n    if (!localHasData || !autoFitEnabled) return;\r\n    \r\n    let newParams = {};\r\n    Object.keys(phaseData).forEach(phase => {\r\n      const points = phaseData[phase];\r\n      if (points.length < 3) {\r\n        newParams[phase] = { Qi: points?.[0]?.value || 100, b: 0.5, D: 0.05 };\r\n      } else {\r\n        // Simple fit - find the first and last points\r\n        const first = points[0];\r\n        const last = points[points.length - 1];\r\n        \r\n        // Default values\r\n        const Qi = first.value;\r\n        const b = 0.5;  // Reasonable default\r\n        \r\n        // Calculate D based on decline between first and last points\r\n        const ratio = last.value / first.value;\r\n        const t = last.t - first.t;\r\n        \r\n        let D;\r\n        if (b === 0) {\r\n          // Exponential\r\n          D = -Math.log(ratio) / t;\r\n        } else {\r\n          // Hyperbolic\r\n          D = ((1 / ratio) ** b - 1) / (b * t);\r\n        }\r\n        \r\n        // Ensure D is reasonable\r\n        D = Math.max(0.001, Math.min(0.5, D));\r\n        \r\n        newParams[phase] = { Qi, b, D };\r\n      }\r\n    });\r\n    \r\n    // Only update if parameters changed\r\n    if (JSON.stringify(newParams) !== JSON.stringify(prevParamsRef.current)) {\r\n      prevParamsRef.current = newParams;\r\n      setPhaseParams(newParams);\r\n    }\r\n  }, [phaseData, localHasData, autoFitEnabled]);\r\n  \r\n  // Convert phase data to points for plotting\r\n  const allHistoricalPoints = useMemo(() => {\r\n    let out = [];\r\n    Object.keys(phaseData).forEach(phase => {\r\n      phaseData[phase].forEach(d => {\r\n        out.push({\r\n          date: new Date(firstDate.getTime() + d.t * 86400000),\r\n          Q: d.value,\r\n          phase\r\n        });\r\n      });\r\n    });\r\n    return out;\r\n  }, [phaseData, firstDate]);\r\n  \r\n  // Simple forecast calculation\r\n  const allForecastPoints = useMemo(() => {\r\n    if (!localHasData) return {};\r\n    \r\n    let out = {};\r\n    Object.keys(phaseParams).forEach(phase => {\r\n      const { Qi, b, D } = phaseParams[phase] || {};\r\n      if (!Qi || D <= 0) {\r\n        out[phase] = [];\r\n        return;\r\n      }\r\n      \r\n      // Calculate last rate at tMax\r\n      const lastRate = calculateRate(Qi, b, D, tMax);\r\n      \r\n      // Create forecast points\r\n      const points = [];\r\n      const steps = 50;\r\n      \r\n      // Add the start point (last production date)\r\n      points.push({\r\n        date: lastProdDate,\r\n        Q: lastRate,\r\n        phase\r\n      });\r\n      \r\n      // Add forecast points\r\n      for (let i = 1; i <= steps; i++) {\r\n        const days = (i / steps) * forecastDays;\r\n        const t = tMax + days;\r\n        \r\n        const Q = calculateRate(Qi, b, D, t);\r\n        const date = new Date(lastProdDate.getTime() + days * 86400000);\r\n        \r\n        points.push({\r\n          date,\r\n          Q,\r\n          phase\r\n        });\r\n      }\r\n      \r\n      out[phase] = points;\r\n    });\r\n    \r\n    return out;\r\n  }, [phaseParams, tMax, lastProdDate, forecastDays, localHasData]);\r\n  \r\n  // Calculate EUR and forecast average\r\n  const calculatedEUR = useMemo(() => {\r\n    let results = {};\r\n    Object.keys(phaseParams).forEach(phase => {\r\n      const { Qi, b, D } = phaseParams[phase] || {};\r\n      if (!Qi || D <= 0) {\r\n        results[phase] = \"N/A\";\r\n        return;\r\n      }\r\n      \r\n      if (b === 0) results[phase] = Qi / D;\r\n      else if (b > 0 && b < 1) results[phase] = Qi / (D * (1 - b));\r\n      else if (b === 1) results[phase] = Qi * 10000;\r\n      else results[phase] = \"N/A\";\r\n    });\r\n    return results;\r\n  }, [phaseParams]);\r\n  \r\n  const forecastAverage = useMemo(() => {\r\n    let fa = {};\r\n    Object.keys(phaseParams).forEach(phase => {\r\n      const { Qi, b, D } = phaseParams[phase] || {};\r\n      if (!Qi || D <= 0) {\r\n        fa[phase] = 0;\r\n        return;\r\n      }\r\n      \r\n      const Q_start = calculateRate(Qi, b, D, tMax);\r\n      const steps = 60;\r\n      let sum = 0;\r\n      \r\n      for (let i = 0; i <= steps; i++) {\r\n        const t = tMax + (i / steps) * 60;\r\n        const Q = calculateRate(Qi, b, D, t);\r\n        sum += Q;\r\n      }\r\n      \r\n      fa[phase] = sum / (steps + 1);\r\n    });\r\n    return fa;\r\n  }, [phaseParams, tMax]);\r\n  \r\n  // Call onParametersCalculated when params change\r\n  useEffect(() => {\r\n    if (!onParametersCalculated) return;\r\n    \r\n    const newParams = { phaseParams, calculatedEUR, forecastAverage };\r\n    const stringifiedNew = JSON.stringify(newParams);\r\n    const stringifiedPrev = JSON.stringify(lastOnParamsCallRef.current);\r\n    \r\n    if (stringifiedNew !== stringifiedPrev) {\r\n      lastOnParamsCallRef.current = newParams;\r\n      onParametersCalculated(newParams);\r\n    }\r\n  }, [phaseParams, calculatedEUR, forecastAverage, onParametersCalculated]);\r\n  \r\n  // Improved key event handlers\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      const key = e.key.toLowerCase();\r\n      if ([\"d\", \"q\", \"b\"].includes(key)) {\r\n        // Only set the active key if not already in a drag operation\r\n        if (!dragInProgressRef.current) {\r\n          setActiveKey(key);\r\n        }\r\n      }\r\n    };\r\n    \r\n    const handleKeyUp = (e) => {\r\n      const key = e.key.toLowerCase();\r\n      if (key === activeKey) {\r\n        setActiveKey(null);\r\n        dragInProgressRef.current = false;\r\n        dragStartPointRef.current = null;\r\n      }\r\n    };\r\n    \r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    window.addEventListener(\"keyup\", handleKeyUp);\r\n    \r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n      window.removeEventListener(\"keyup\", handleKeyUp);\r\n    };\r\n  }, [activeKey]);\r\n  \r\n  // Helper function to get appropriate sensitivity for each parameter\r\n  const getSensitivity = (key) => {\r\n    switch (key) {\r\n      case \"d\": return 0.0002; // Much lower sensitivity for D\r\n      case \"q\": return 0.5;    // Moderate sensitivity for Qi\r\n      case \"b\": return 0.002;  // Low sensitivity for b\r\n      default: return 1;\r\n    }\r\n  };\r\n  \r\n  // Update all chart elements when parameters change\r\n  const updateChartElements = () => {\r\n    if (!svgRef.current) return;\r\n    \r\n    const svg = d3.select(svgRef.current);\r\n    const xScale = xScaleRef.current;\r\n    const yScale = yScaleRef.current;\r\n    \r\n    if (!xScale || !yScale) return;\r\n    \r\n    // Update all data paths\r\n    Object.keys(phaseParams).forEach(phase => {\r\n      // Generate historical line data\r\n      const { Qi, b, D } = phaseParams[phase];\r\n      const historicalLineData = [];\r\n      const steps = 100;\r\n      \r\n      for (let i = 0; i <= steps; i++) {\r\n        const frac = i / steps;\r\n        const t = tMax * frac;\r\n        const Q = calculateRate(Qi, b, D, t);\r\n        const date = new Date(firstDate.getTime() + t * 86400000);\r\n        \r\n        historicalLineData.push({ date, Q });\r\n      }\r\n      \r\n      // Update the historical line path\r\n      const lineGen = d3.line()\r\n        .x(d => xScale(d.date))\r\n        .y(d => yScale(d.Q))\r\n        .curve(d3.curveMonotoneX);\r\n      \r\n      svg.select(`.decline-line-${phase}`)\r\n        .datum(historicalLineData)\r\n        .attr(\"d\", lineGen);\r\n      \r\n      // Generate and update forecast data\r\n      const forecastData = allForecastPoints[phase] || [];\r\n      \r\n      svg.select(`.forecast-line-${phase}`)\r\n        .datum(forecastData)\r\n        .attr(\"d\", lineGen);\r\n    });\r\n  };\r\n  \r\n  // D3 rendering\r\n  useEffect(() => {\r\n    if (!localHasData || !svgRef.current) {\r\n      console.log('No data or SVG ref to render');\r\n      return;\r\n    }\r\n    \r\n    const margin = { top: 20, right: 30, bottom: 40, left: 60 };\r\n    const width = 800;\r\n    const height = 400;\r\n    const svg = d3.select(svgRef.current);\r\n    \r\n    // Clear previous content\r\n    svg.selectAll(\"*\").remove();\r\n    \r\n    // Create background for plot area\r\n    svg.append(\"rect\")\r\n      .attr(\"x\", margin.left)\r\n      .attr(\"y\", margin.top)\r\n      .attr(\"width\", width - margin.left - margin.right)\r\n      .attr(\"height\", height - margin.top - margin.bottom)\r\n      .attr(\"fill\", \"#f8f8f8\")\r\n      .attr(\"stroke\", \"#ccc\");\r\n    \r\n    // Create chart area group\r\n    const chartArea = svg.append(\"g\")\r\n      .attr(\"class\", \"chart-area\");\r\n    \r\n    // Set up scales\r\n    const dateExtent = d3.extent([\r\n      ...allHistoricalPoints.map(d => d.date),\r\n      ...Object.values(allForecastPoints).flat().map(d => d.date)\r\n    ]);\r\n    \r\n    const minDate = dateExtent[0] || new Date();\r\n    const maxDate = dateExtent[1] || new Date();\r\n    \r\n    const qValues = [\r\n      ...allHistoricalPoints.map(d => d.Q),\r\n      ...Object.values(allForecastPoints).flat().map(d => d.Q)\r\n    ];\r\n    \r\n    const qExtent = d3.extent(qValues);\r\n    let minQ = qExtent[0] || 0;\r\n    let maxQ = qExtent[1] || 100;\r\n    \r\n    // Add padding for Y axis\r\n    if (yScaleType !== \"log\") {\r\n      const qRange = maxQ - minQ;\r\n      maxQ = maxQ + qRange * 0.1;\r\n      minQ = Math.max(0, minQ - qRange * 0.05);\r\n    } else if (minQ <= 0) {\r\n      minQ = 0.01;\r\n    }\r\n    \r\n    // Create scales\r\n    const xScale = d3.scaleTime()\r\n      .domain([minDate, maxDate])\r\n      .range([margin.left, width - margin.right]);\r\n    \r\n    xScaleRef.current = xScale;\r\n    \r\n    const yScale = yScaleType === \"log\"\r\n      ? d3.scaleLog()\r\n          .domain([Math.max(0.01, minQ), maxQ])\r\n          .range([height - margin.bottom, margin.top])\r\n      : d3.scaleLinear()\r\n          .domain([minQ, maxQ])\r\n          .range([height - margin.bottom, margin.top]);\r\n    \r\n    yScaleRef.current = yScale;\r\n    \r\n    // Draw historical data points\r\n    Object.keys(phasesDetected).forEach(phase => {\r\n      const points = allHistoricalPoints.filter(p => p.phase === phase);\r\n      \r\n      chartArea.selectAll(`circle.${phase}`)\r\n        .data(points)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"class\", phase)\r\n        .attr(\"cx\", d => xScale(d.date))\r\n        .attr(\"cy\", d => yScale(d.Q))\r\n        .attr(\"r\", 3)\r\n        .attr(\"fill\", colors[phase] || \"#888\");\r\n    });\r\n    \r\n    // Draw historical trend lines\r\n    Object.keys(phaseParams).forEach(phase => {\r\n      // Only draw if we have parameters and data\r\n      if (!phaseParams[phase] || !phaseData[phase]?.length) return;\r\n      \r\n      const { Qi, b, D } = phaseParams[phase];\r\n      \r\n      // Create line data\r\n      const lineData = [];\r\n      const steps = 100;\r\n      \r\n      for (let i = 0; i <= steps; i++) {\r\n        const frac = i / steps;\r\n        const t = tMax * frac;\r\n        const Q = calculateRate(Qi, b, D, t);\r\n        const date = new Date(firstDate.getTime() + t * 86400000);\r\n        \r\n        lineData.push({ date, Q });\r\n      }\r\n      \r\n      // Create line generator\r\n      const lineGen = d3.line()\r\n        .x(d => xScale(d.date))\r\n        .y(d => yScale(d.Q))\r\n        .curve(d3.curveMonotoneX);\r\n      \r\n      // Draw line\r\n      chartArea.append(\"path\")\r\n        .datum(lineData)\r\n        .attr(\"class\", `decline-line-${phase}`)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", colors[phase] || \"#888\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"d\", lineGen)\r\n        .style(\"cursor\", \"pointer\")\r\n        .on(\"mouseover\", function() {\r\n          // Highlight on hover\r\n          d3.select(this)\r\n            .attr(\"stroke-width\", 4);\r\n        })\r\n        .on(\"mouseout\", function() {\r\n          // Unhighlight if not the active phase\r\n          if (phase !== activePhase) {\r\n            d3.select(this)\r\n              .attr(\"stroke-width\", 2);\r\n          }\r\n        })\r\n        .on(\"mousedown\", function(event) {\r\n          // Set this as the active phase when clicked\r\n          setActivePhase(phase);\r\n          \r\n          // Only initiate drag if a key is pressed\r\n          if (activeKey) {\r\n            if (autoFitEnabled) setAutoFitEnabled(false);\r\n            \r\n            // Mark drag as started and store the starting point\r\n            dragInProgressRef.current = true;\r\n            dragStartPointRef.current = { \r\n              y: event.y,\r\n              params: {...phaseParams[phase]}\r\n            };\r\n            \r\n            // Highlight the active line\r\n            d3.select(this)\r\n              .attr(\"stroke-width\", 4);\r\n          }\r\n        })\r\n        .on(\"mouseup\", function() {\r\n          // End the drag operation\r\n          dragInProgressRef.current = false;\r\n          dragStartPointRef.current = null;\r\n        })\r\n        .call(\r\n          d3.drag().on(\"drag\", event => {\r\n            if (!activeKey || !dragInProgressRef.current) return;\r\n            \r\n            // Only proceed if we have a starting point\r\n            if (!dragStartPointRef.current) {\r\n              dragStartPointRef.current = { \r\n                y: event.y,\r\n                params: {...phaseParams[phase]}\r\n              };\r\n              return;\r\n            }\r\n            \r\n            const startParams = dragStartPointRef.current.params;\r\n            const totalDy = event.y - dragStartPointRef.current.y;\r\n            const sensitivity = getSensitivity(activeKey);\r\n            \r\n            setPhaseParams(prev => {\r\n              const copy = { ...prev };\r\n              const curr = { ...copy[phase] };\r\n              \r\n              if (activeKey === \"d\") {\r\n                // For D, we use the start value and apply a percentage change\r\n                const factor = 1 - (totalDy * sensitivity);\r\n                curr.D = Math.max(0.0001, startParams.D * factor);\r\n              } else if (activeKey === \"q\") {\r\n                // For Qi, we subtract directly from the start value\r\n                curr.Qi = Math.max(1, startParams.Qi - totalDy * sensitivity);\r\n              } else if (activeKey === \"b\") {\r\n                // For b, we add/subtract from the start value but clamp\r\n                curr.b = Math.max(0, Math.min(1, startParams.b + totalDy * sensitivity));\r\n              }\r\n              \r\n              copy[phase] = curr;\r\n              return copy;\r\n            });\r\n            \r\n            // Update the chart in real-time\r\n            updateChartElements();\r\n          })\r\n        );\r\n    });\r\n    \r\n    // Draw forecast lines\r\n    Object.keys(allForecastPoints).forEach(phase => {\r\n      const forecastPoints = allForecastPoints[phase];\r\n      \r\n      if (forecastPoints.length > 1) {\r\n        const lineGen = d3.line()\r\n          .x(d => xScale(d.date))\r\n          .y(d => yScale(d.Q))\r\n          .curve(d3.curveMonotoneX);\r\n        \r\n        chartArea.append(\"path\")\r\n          .datum(forecastPoints)\r\n          .attr(\"class\", `forecast-line-${phase}`)\r\n          .attr(\"fill\", \"none\")\r\n          .attr(\"stroke\", d3.color(colors[phase] || \"#888\").brighter(1.2))\r\n          .attr(\"stroke-width\", 3)\r\n          .attr(\"stroke-dasharray\", \"5,3\")\r\n          .attr(\"d\", lineGen)\r\n          .on(\"mouseover\", function() {\r\n            d3.select(this)\r\n              .attr(\"stroke-width\", 5);\r\n          })\r\n          .on(\"mouseout\", function() {\r\n            if (phase !== activePhase) {\r\n              d3.select(this)\r\n                .attr(\"stroke-width\", 3);\r\n            }\r\n          });\r\n      }\r\n    });\r\n    \r\n    // Add vertical line at last production date\r\n    chartArea.append(\"line\")\r\n      .attr(\"x1\", xScale(lastProdDate))\r\n      .attr(\"y1\", margin.top)\r\n      .attr(\"x2\", xScale(lastProdDate))\r\n      .attr(\"y2\", height - margin.bottom)\r\n      .attr(\"stroke\", \"#666\")\r\n      .attr(\"stroke-width\", 1)\r\n      .attr(\"stroke-dasharray\", \"5,5\");\r\n    \r\n    // Add forecast label\r\n    chartArea.append(\"text\")\r\n      .attr(\"x\", xScale(lastProdDate) + 5)\r\n      .attr(\"y\", margin.top + 15)\r\n      .attr(\"fill\", \"#666\")\r\n      .text(\"Forecast →\");\r\n    \r\n    // Add axes\r\n    const xAxis = d3.axisBottom(xScale)\r\n      .tickFormat(d3.timeFormat(\"%Y-%m-%d\"));\r\n    \r\n    svg.append(\"g\")\r\n      .attr(\"transform\", `translate(0,${height - margin.bottom})`)\r\n      .call(xAxis)\r\n      .selectAll(\"text\")\r\n      .attr(\"transform\", \"rotate(-45)\")\r\n      .style(\"text-anchor\", \"end\");\r\n    \r\n    const yAxis = yScaleType === \"log\"\r\n      ? d3.axisLeft(yScale).ticks(6, \"~s\")\r\n      : d3.axisLeft(yScale);\r\n    \r\n    svg.append(\"g\")\r\n      .attr(\"transform\", `translate(${margin.left},0)`)\r\n      .call(yAxis);\r\n    \r\n    // Add axis labels\r\n    svg.append(\"text\")\r\n      .attr(\"x\", width / 2)\r\n      .attr(\"y\", height - 5)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .text(\"Date\");\r\n    \r\n    svg.append(\"text\")\r\n      .attr(\"transform\", \"rotate(-90)\")\r\n      .attr(\"x\", -height / 2)\r\n      .attr(\"y\", 15)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .text(\"Production Rate\");\r\n    \r\n    // Add zoom behavior\r\n    const zoom = d3.zoom()\r\n      .scaleExtent([0.5, 10])\r\n      .on(\"zoom\", event => {\r\n        const newYScale = event.transform.rescaleY(yScale);\r\n        yScaleRef.current = newYScale;\r\n        \r\n        // Update circles\r\n        chartArea.selectAll(\"circle\")\r\n          .attr(\"cy\", d => newYScale(d.Q));\r\n        \r\n        // Update paths\r\n        chartArea.selectAll(\"path\")\r\n          .attr(\"d\", function(d) {\r\n            if (!Array.isArray(d)) return;\r\n            \r\n            const lineGen = d3.line()\r\n              .x(d => xScale(d.date))\r\n              .y(d => newYScale(d.Q))\r\n              .curve(d3.curveMonotoneX);\r\n            \r\n            return lineGen(d);\r\n          });\r\n        \r\n        // Update y-axis\r\n        svg.select(\"g:has(.tick)\")\r\n          .call(yAxis.scale(newYScale));\r\n      });\r\n    \r\n    svg.call(zoom);\r\n    \r\n  }, [\r\n    localHasData,\r\n    allHistoricalPoints,\r\n    allForecastPoints,\r\n    phasesDetected,\r\n    phaseParams,\r\n    phaseData,\r\n    firstDate,\r\n    tMax,\r\n    lastProdDate,\r\n    yScaleType,\r\n    colors,\r\n    forecastDays\r\n  ]);\r\n  \r\n  // Render component\r\n  return (\r\n    <div style={{ position: 'relative' }}>\r\n      <div style={{ marginBottom: 10 }}>\r\n        <div style={{ display: 'flex', gap: 20, alignItems: 'center' }}>\r\n          <div>\r\n            <strong>Active Key:</strong> {activeKey ? activeKey.toUpperCase() : \"None\"}\r\n          </div>\r\n          <div>\r\n            <strong>Selected Phase:</strong> {activePhase ? activePhase.toUpperCase() : \"None\"}\r\n          </div>\r\n          <div>\r\n            <strong>Drag Status:</strong> {dragInProgressRef.current ? \"In Progress\" : \"None\"}\r\n          </div>\r\n        </div>\r\n        <div style={{ marginTop: 5 }}>\r\n          <strong>Instructions:</strong> Hold D, Q, or B key and drag a line to adjust parameters\r\n        </div>\r\n      </div>\r\n      \r\n      <svg\r\n        ref={svgRef}\r\n        width={800}\r\n        height={400}\r\n        onMouseMove={(event) => {\r\n          if (!localHasData || !xScaleRef.current) return;\r\n          \r\n          const [mouseX] = d3.pointer(event, svgRef.current);\r\n          const date = xScaleRef.current.invert(mouseX);\r\n          const t = (date - firstDate) / 86400000;\r\n          \r\n          let vals = {};\r\n          Object.keys(phaseParams).forEach(phase => {\r\n            const { Qi, b, D } = phaseParams[phase] || {};\r\n            if (Qi && b !== undefined && D) {\r\n              vals[phase] = calculateRate(Qi, b, D, t);\r\n            }\r\n          });\r\n          \r\n          setHoverInfo({ x: mouseX, date, values: vals });\r\n        }}\r\n        onMouseOut={() => setHoverInfo(null)}\r\n      />\r\n      \r\n      {hoverInfo && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            left: hoverInfo.x + 5,\r\n            top: 40,\r\n            pointerEvents: 'none',\r\n            background: 'rgba(255,255,255,0.9)',\r\n            border: '1px solid #ccc',\r\n            padding: 5,\r\n            fontSize: 12,\r\n            borderRadius: 4\r\n          }}\r\n        >\r\n          <div>{hoverInfo.date.toDateString()}</div>\r\n          {Object.keys(hoverInfo.values).map(ph => (\r\n            <div key={ph}>\r\n              {ph.toUpperCase()}: {hoverInfo.values[ph].toFixed(2)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}